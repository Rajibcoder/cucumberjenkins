pipeline {
    agent any 
    stages {
        stage('compile') {
           steps {
               withMaven(maven:'maven_3_5_0'){
                   
                   sh 'mvn clean install'
               }

           }
        }
        stage('test') {
           steps {
               withMaven(maven:'maven_3_5_0'){
                   
                   sh 'mvn test'
               }

           }
        }
        stage('Cucumber Reports') {
           steps {
               cucumber buildStatus: "UNSTABLE",
               		fileIncludePattern: "**/cucumber.json",
               		jsonReportDirectory: 'target'
           }
        }
    }
}